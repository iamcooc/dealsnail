CKEDITOR.editorConfig=function(e){e.extraPlugins="mediaembed",e.toolbar_mini=[["Source","Undo","Redo","-","Find","Replace","-","SelectAll","RemoveFormat"],["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink","MediaEmbed"],["Image","Table","HorizontalRule"],["Styles","Format","Font","FontSize"],["TextColor","BGColor"]],e.toolbar="mini",e.filebrowserBrowseUrl="/ckeditor/attachment_files",e.filebrowserFlashBrowseUrl="/ckeditor/attachment_files",e.filebrowserFlashUploadUrl="/ckeditor/attachment_files",e.filebrowserImageBrowseLinkUrl="/ckeditor/pictures",e.filebrowserImageBrowseUrl="/ckeditor/pictures",e.filebrowserImageUploadUrl="/ckeditor/pictures",e.filebrowserUploadUrl="/ckeditor/attachment_files",e.filebrowserParams=function(){for(var e,t,r,i=document.getElementsByTagName("meta"),o=new Object,n=0;n<i.length;n++)switch(r=i[n],r.name){case"csrf-token":e=r.content;break;case"csrf-param":t=r.content;break;default:continue}return void 0!==t&&void 0!==e&&(o[t]=e),o},e.addQueryString=function(e,t){var r=[];if(!t)return e;for(var i in t)r.push(i+"="+encodeURIComponent(t[i]));return e+(-1!=e.indexOf("?")?"&":"?")+r.join("&")},CKEDITOR.on("dialogDefinition",function(t){var r,i,o=t.data.name,n=t.data.definition;CKEDITOR.tools.indexOf(["link","image","attachment","flash"],o)>-1&&(r=n.getContents("Upload")||n.getContents("upload"),i=null==r?null:r.get("upload"),i&&i.filebrowser&&void 0===i.filebrowser.params&&(i.filebrowser.params=e.filebrowserParams(),i.action=e.addQueryString(i.action,i.filebrowser.params)))})};